\doxysection{IMU\+\_\+driver.\+h}
\hypertarget{_i_m_u__driver_8h_source}{}\label{_i_m_u__driver_8h_source}\index{IMU\_driver.h@{IMU\_driver.h}}
\mbox{\hyperlink{_i_m_u__driver_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ IMU\_driver.h}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ \ Created\ on:\ Jun\ 2,\ 2024}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ \ \ \ \ \ Author:\ sydne}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#ifndef\ IMU\_DRIVER\_H\_}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#define\ IMU\_DRIVER\_H\_}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}stm32f4xx\_hal.h"{}}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{comment}{//\ ICM\ 20948\ register\ addresses}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#define\ ICM20948\_I2C\_ADDR\ (0x69<<1)\ }\textcolor{comment}{//\ 7\ bit\ address\ shifted\ 1\ for\ R/W}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#define\ WHO\_AM\_I\_REG\ 0x00}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#define\ PWR\_MGMT\_1\_REG\ 0x06}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ accel\ mem\ locations}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#define\ ACCEL\_XOUT\_H\ 0x2D\ }\textcolor{comment}{//high\ byte}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#define\ ACCEL\_XOUT\_L\ 0x2E\ }\textcolor{comment}{//low\ byte}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#define\ ACCEL\_YOUT\_H\ 0x2F}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#define\ ACCEL\_YOUT\_L\ 0x30}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#define\ ACCEL\_ZOUT\_H\ 0x31}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#define\ ACCEL\_ZOUT\_L\ 0x32}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#define\ ACCEL\_FS\ 16384}}
\DoxyCodeLine{00024\ \textcolor{comment}{//\ gyro\ mem\ locations}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#define\ GYRO\_XOUT\_H\ 0x33\ }\textcolor{comment}{//high\ byte}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#define\ GYRO\_XOUT\_L\ 0x34\ }\textcolor{comment}{//low\ byte}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#define\ GYRO\_YOUT\_H\ 0x35}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#define\ GYRO\_YOUT\_L\ 0x36}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#define\ GYRO\_ZOUT\_H\ 0x37}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#define\ GYRO\_ZOUT\_L\ 0x38}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#define\ GYRO\_FS\_SEL\ 131}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#define\ GRAV\ 9.81}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{comment}{//\ ICM\ 20948,\ essential\ info\ to\ define\ the\ IMU\ for\ use}}
\DoxyCodeLine{00036\ \textcolor{keyword}{struct\ }IMU\_comm\_struct\ \{}
\DoxyCodeLine{00037\ \ \ \ \ I2C\_HandleTypeDef*\mbox{\hyperlink{struct_i_c_m__20948_abf45242a4a812df409b53ce5216f8d7e}{hi2c}};\ \textcolor{comment}{//i2c\ used}}
\DoxyCodeLine{00038\ \ \ \ \ UART\_HandleTypeDef*\mbox{\hyperlink{struct_i_c_m__20948_a1ed7dab212fde0a3a4600d33399c67b6}{huart}};\ \ \textcolor{comment}{//uart\ used}}
\DoxyCodeLine{00039\ \}\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_i_c_m__20948}{ICM\_20948}};}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \textcolor{comment}{//\ struct\ to\ hold\ the\ acceleration\ readings}}
\DoxyCodeLine{00042\ \textcolor{keyword}{struct\ }accel\_struct\ \{}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{struct_accel_data_a7afe3a6c26cdd445178cd83179491e40}{accel\_x}};}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{struct_accel_data_ad8d3e4986ab0b0e7a17c77972b2d29e5}{accel\_y}};}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{struct_accel_data_ab0ba2b834f44f31e60538b2f2dc01b40}{accel\_z}};}
\DoxyCodeLine{00046\ \}\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_accel_data}{AccelData}};}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{comment}{//\ struct\ to\ hold\ gyro\ data}}
\DoxyCodeLine{00049\ \textcolor{keyword}{struct\ }gyro\_struct\ \{}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{struct_gyro_data_a1b80c9ecac5a5fc15e27ba109a9b5b9f}{gyro\_x}};}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{struct_gyro_data_a4fb44c3aee68cbf76bda20093860d83a}{gyro\_y}};}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{struct_gyro_data_a9e90fb26dd6e5b319874641588f10e7c}{gyro\_z}};}
\DoxyCodeLine{00053\ \}\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{struct_gyro_data}{GyroData}};}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \textcolor{comment}{//function\ prototypes}}
\DoxyCodeLine{00057\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{_i_m_u__driver_8h_a0cd74f8ea5d18c95b16939d0c535c7c7}{IMU\_init}}(\mbox{\hyperlink{struct_i_c_m__20948}{ICM\_20948}}*p\_IMU);}
\DoxyCodeLine{00058\ \mbox{\hyperlink{struct_accel_data}{AccelData}}\ \mbox{\hyperlink{_i_m_u__driver_8h_a229fc931e0c8d8ddaae97a55d42fb407}{IMU\_read\_accel}}(\mbox{\hyperlink{struct_i_c_m__20948}{ICM\_20948}}*p\_IMU);}
\DoxyCodeLine{00059\ \mbox{\hyperlink{struct_gyro_data}{GyroData}}\ \mbox{\hyperlink{_i_m_u__driver_8h_a1b2077ee259f3a484590a093cd950b3e}{IMU\_read\_gyro}}(\mbox{\hyperlink{struct_i_c_m__20948}{ICM\_20948}}*p\_IMU);}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{/*\ IMU\_DRIVER\_H\_\ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
